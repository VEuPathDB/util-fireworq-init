= Fireworq Queue Initializer

A config based script that creates queues in a Fireworq instance as necessary.

== Usage

=== CLI

[source, shell-session]
----
$ ./setup -q http://some.queue.host -c my-config.yml
2021/04/14 14:45:46 Loading queue config from queues.yml
2021/04/14 14:45:46 Fetching queues from http://localhost:8083
2021/04/14 14:45:46 Creating new queue queue-1
2021/04/14 14:45:46 Done
----

==== Flags

`-q|--queue`::
*Optional*
+
URL to the Fireworq instance to initialize.  Defaults to `\http://localhost`.

`-c|--config`::
*Optional*
+
Path to the queue configuration file.  Defaults to `./queues.yml`

=== Docker

.Dockerfile
[source, dockerfile]
----
FROM alpine:3

ARG SETUP_UTIL_URL=https://github.com/VEuPathDB/util-fireworq-init/releases/download/v1.3.0/queue-setup.v1.3.0.x64.tar.gz
ARG FIREWORQ_URL=https://github.com/fireworq/fireworq/releases/download/v1.4.1/fireworq_linux_amd64.zip

# Install utils, fetch fireworq, fetch queue setup
RUN apk add --no-cache wget tar zip \
    && wget ${FIREWORQ_URL} -O fireworq.zip \
    && wget ${SETUP_UTIL_URL} -O setup.tar.gz \
    && unzip -j fireworq.zip fireworq -d /usr/local/bin && rm fireworq.zip \
    && tar -xf setup.tar.gz -C /usr/local/bin && rm setup.tar.gz

COPY queues.yml queues.yml

CMD /usr/local/bin/entrypoint
----